{
	"info": {
		"_postman_id": "validation-ex02",
		"name": "Ex02 - Data Validation and Quality Tests",
		"description": "Exercise 2 test suite focusing on input validation and data quality.\n\nTests covered:\n- Missing required fields (orderId, numItems)\n- Invalid field types (string instead of integer)\n- Invalid orderId format (non-hexadecimal characters)\n- Malformed JSON\n- Extra/unknown fields in request body\n- Empty/blank values\n- Boundary conditions\n\nPrerequisites:\n- Producer and Consumer services running\n- EDA-Local environment configured\n\nExpected Behavior:\nAll validation errors should return HTTP 400 Bad Request with descriptive error messages.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Producer Validation Tests",
			"item": [
				{
					"name": "Test 1.1 - Missing orderId (Create Order)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Validation error (400 Bad Request)\", () => {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"Error message indicates missing orderId\", () => {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.error).to.eql(\"Bad Request\");",
									"    pm.expect(jsonData.message).to.include(\"Validation error\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"numItems\": 5\n}"
						},
						"url": {
							"raw": "{{base_url_producer}}/create-order",
							"host": ["{{base_url_producer}}"],
							"path": ["create-order"]
						},
						"description": "Test validation: Missing required field 'orderId'. Should return 400 Bad Request."
					},
					"response": []
				},
				{
					"name": "Test 1.2 - Missing numItems (Create Order)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Validation error (400 Bad Request)\", () => {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"Error message indicates missing numItems\", () => {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.error).to.eql(\"Bad Request\");",
									"    pm.expect(jsonData.message).to.include(\"Validation error\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"orderId\": \"ABC123\"\n}"
						},
						"url": {
							"raw": "{{base_url_producer}}/create-order",
							"host": ["{{base_url_producer}}"],
							"path": ["create-order"]
						},
						"description": "Test validation: Missing required field 'numItems'. Should return 400 Bad Request."
					},
					"response": []
				},
				{
					"name": "Test 1.3 - Empty orderId (Create Order)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Validation error (400 Bad Request)\", () => {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"Error message indicates empty orderId\", () => {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.error).to.eql(\"Bad Request\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"orderId\": \"\",\n    \"numItems\": 3\n}"
						},
						"url": {
							"raw": "{{base_url_producer}}/create-order",
							"host": ["{{base_url_producer}}"],
							"path": ["create-order"]
						},
						"description": "Test validation: Empty orderId string. Should return 400 Bad Request."
					},
					"response": []
				},
				{
					"name": "Test 1.4 - Invalid orderId Format (Non-Hex Characters)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Validation error (400 Bad Request)\", () => {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"Error message indicates invalid orderId format\", () => {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.error).to.eql(\"Bad Request\");",
									"    pm.expect(jsonData.message).to.include(\"hexadecimal\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"orderId\": \"XYZ-@#$%\",\n    \"numItems\": 2\n}"
						},
						"url": {
							"raw": "{{base_url_producer}}/create-order",
							"host": ["{{base_url_producer}}"],
							"path": ["create-order"]
						},
						"description": "Test validation: orderId with non-hexadecimal characters. Should return 400 Bad Request."
					},
					"response": []
				},
				{
					"name": "Test 1.5 - Invalid Field Type: numItems as String",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Validation error (400 Bad Request)\", () => {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"Error indicates invalid request body\", () => {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.error).to.eql(\"Bad Request\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"orderId\": \"ABC123\",\n    \"numItems\": \"five\"\n}"
						},
						"url": {
							"raw": "{{base_url_producer}}/create-order",
							"host": ["{{base_url_producer}}"],
							"path": ["create-order"]
						},
						"description": "Test validation: numItems as string instead of integer. Should return 400 Bad Request."
					},
					"response": []
				},
				{
					"name": "Test 1.6 - Malformed JSON (Create Order)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Validation error (400 Bad Request)\", () => {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"Error message indicates invalid request body\", () => {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.error).to.eql(\"Bad Request\");",
									"    pm.expect(jsonData.message).to.include(\"Invalid request body\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"orderId\": \"ABC123\",\n    \"numItems\": 5"
						},
						"url": {
							"raw": "{{base_url_producer}}/create-order",
							"host": ["{{base_url_producer}}"],
							"path": ["create-order"]
						},
						"description": "Test validation: Malformed JSON (missing closing brace). Should return 400 Bad Request."
					},
					"response": []
				},
				{
					"name": "Test 1.7 - Extra Unknown Fields (Create Order)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Spring Boot ignores unknown fields by default",
									"pm.test(\"Request accepted despite extra fields (201 Created)\", () => {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Order created successfully\", () => {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.order.orderId).to.be.a(\"string\");",
									"    console.log(\"Extra fields ignored gracefully (Spring Boot default behavior)\");",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"function generateHexId(length) {",
									"    let result = '';",
									"    const characters = '0123456789ABCDEF';",
									"    for (let i = 0; i < length; i++) {",
									"        result += characters.charAt(Math.floor(Math.random() * characters.length));",
									"    }",
									"    return result;",
									"}",
									"pm.environment.set(\"test_order_extra_fields\", generateHexId(16));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"orderId\": \"{{test_order_extra_fields}}\",\n    \"numItems\": 3,\n    \"extraField1\": \"ignored\",\n    \"unknownField\": 999\n}"
						},
						"url": {
							"raw": "{{base_url_producer}}/create-order",
							"host": ["{{base_url_producer}}"],
							"path": ["create-order"]
						},
						"description": "Test data quality: Request with extra unknown fields. Spring Boot ignores them by default (201 Created)."
					},
					"response": []
				},
				{
					"name": "Test 2.1 - Missing orderId (Update Order)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Validation error (400 Bad Request)\", () => {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"Error message indicates validation error\", () => {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.error).to.eql(\"Bad Request\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"status\": \"DISPATCHED\"\n}"
						},
						"url": {
							"raw": "{{base_url_producer}}/update-order",
							"host": ["{{base_url_producer}}"],
							"path": ["update-order"]
						},
						"description": "Test validation: Missing required field 'orderId' in update request. Should return 400 Bad Request."
					},
					"response": []
				},
				{
					"name": "Test 2.2 - Missing status (Update Order)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Validation error (400 Bad Request)\", () => {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"Error message indicates validation error\", () => {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.error).to.eql(\"Bad Request\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"orderId\": \"ABC123\"\n}"
						},
						"url": {
							"raw": "{{base_url_producer}}/update-order",
							"host": ["{{base_url_producer}}"],
							"path": ["update-order"]
						},
						"description": "Test validation: Missing required field 'status' in update request. Should return 400 Bad Request."
					},
					"response": []
				},
				{
					"name": "Test 2.3 - Empty status (Update Order)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Validation error (400 Bad Request)\", () => {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"Error message indicates validation error\", () => {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.error).to.eql(\"Bad Request\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"orderId\": \"ABC123\",\n    \"status\": \"\"\n}"
						},
						"url": {
							"raw": "{{base_url_producer}}/update-order",
							"host": ["{{base_url_producer}}"],
							"path": ["update-order"]
						},
						"description": "Test validation: Empty status string. Should return 400 Bad Request."
					},
					"response": []
				}
			],
			"description": "Validation tests for Producer (Cart Service) endpoints."
		},
		{
			"name": "Consumer Validation Tests",
			"item": [
				{
					"name": "Test 3.1 - Missing orderId (Order Details)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Validation error (400 Bad Request)\", () => {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"Error message indicates validation error\", () => {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.error).to.eql(\"Bad Request\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{base_url_consumer}}/order-details",
							"host": ["{{base_url_consumer}}"],
							"path": ["order-details"]
						},
						"description": "Test validation: Missing required field 'orderId'. Should return 400 Bad Request."
					},
					"response": []
				},
				{
					"name": "Test 3.2 - Empty orderId (Order Details)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Validation error (400 Bad Request)\", () => {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"Error message indicates validation error\", () => {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.error).to.eql(\"Bad Request\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"orderId\": \"\"\n}"
						},
						"url": {
							"raw": "{{base_url_consumer}}/order-details",
							"host": ["{{base_url_consumer}}"],
							"path": ["order-details"]
						},
						"description": "Test validation: Empty orderId string. Should return 400 Bad Request."
					},
					"response": []
				},
				{
					"name": "Test 3.3 - Invalid orderId Format (Consumer)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Validation error (400 Bad Request)\", () => {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"Error message indicates invalid format\", () => {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.error).to.eql(\"Bad Request\");",
									"    // Consumer validates hex format with @Pattern",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"orderId\": \"G1234XYZ\"\n}"
						},
						"url": {
							"raw": "{{base_url_consumer}}/order-details",
							"host": ["{{base_url_consumer}}"],
							"path": ["order-details"]
						},
						"description": "Test validation: orderId with non-hex characters (G, X, Y, Z). Should return 400 Bad Request."
					},
					"response": []
				},
				{
					"name": "Test 3.4 - Malformed JSON (Order Details)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Validation error (400 Bad Request)\", () => {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"Error message indicates malformed JSON\", () => {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.error).to.eql(\"Bad Request\");",
									"    pm.expect(jsonData.message).to.include(\"Invalid request body\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\"orderId\": \"ABC123\""
						},
						"url": {
							"raw": "{{base_url_consumer}}/order-details",
							"host": ["{{base_url_consumer}}"],
							"path": ["order-details"]
						},
						"description": "Test validation: Malformed JSON (missing closing brace). Should return 400 Bad Request."
					},
					"response": []
				},
				{
					"name": "Test 4.1 - Missing topicName (Get All Orders)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Validation error (400 Bad Request)\", () => {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"Error message indicates validation error\", () => {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.error).to.eql(\"Bad Request\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{base_url_consumer}}/getAllOrdersFromTopic",
							"host": ["{{base_url_consumer}}"],
							"path": ["getAllOrdersFromTopic"]
						},
						"description": "Test validation: Missing required field 'topicName'. Should return 400 Bad Request."
					},
					"response": []
				},
				{
					"name": "Test 4.2 - Empty topicName (Get All Orders)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Validation error (400 Bad Request)\", () => {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"Error message indicates validation error\", () => {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.error).to.eql(\"Bad Request\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"topicName\": \"\"\n}"
						},
						"url": {
							"raw": "{{base_url_consumer}}/getAllOrdersFromTopic",
							"host": ["{{base_url_consumer}}"],
							"path": ["getAllOrdersFromTopic"]
						},
						"description": "Test validation: Empty topicName string. Should return 400 Bad Request."
					},
					"response": []
				}
			],
			"description": "Validation tests for Consumer (Order Service) endpoints."
		},
		{
			"name": "Boundary Conditions",
			"item": [
				{
					"name": "Test 5.1 - Zero numItems (Boundary)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"function generateHexId(length) {",
									"    let result = '';",
									"    const characters = '0123456789ABCDEF';",
									"    for (let i = 0; i < length; i++) {",
									"        result += characters.charAt(Math.floor(Math.random() * characters.length));",
									"    }",
									"    return result;",
									"}",
									"pm.environment.set(\"test_order_zero_items\", generateHexId(16));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Depending on validation rules, this may be accepted or rejected",
									"// Check if @Min(1) constraint exists on numItems",
									"if (pm.response.code === 400) {",
									"    pm.test(\"Zero numItems rejected (400 Bad Request)\", () => {",
									"        pm.response.to.have.status(400);",
									"    });",
									"} else {",
									"    pm.test(\"Zero numItems accepted (201 Created)\", () => {",
									"        pm.response.to.have.status(201);",
									"        console.log(\"Zero numItems accepted - no @Min validation\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"orderId\": \"{{test_order_zero_items}}\",\n    \"numItems\": 0\n}"
						},
						"url": {
							"raw": "{{base_url_producer}}/create-order",
							"host": ["{{base_url_producer}}"],
							"path": ["create-order"]
						},
						"description": "Boundary condition: Zero numItems. Behavior depends on validation rules (@Min constraint)."
					},
					"response": []
				},
				{
					"name": "Test 5.2 - Negative numItems (Boundary)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Should be rejected if @Min(1) or @Positive validation exists",
									"pm.test(\"Negative numItems rejected or accepted\", () => {",
									"    // Accept either 400 or 201 depending on validation",
									"    pm.expect(pm.response.code).to.be.oneOf([400, 201]);",
									"    if (pm.response.code === 400) {",
									"        console.log(\"Negative numItems correctly rejected\");",
									"    } else {",
									"        console.log(\"Negative numItems accepted - no validation constraint\");",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"function generateHexId(length) {",
									"    let result = '';",
									"    const characters = '0123456789ABCDEF';",
									"    for (let i = 0; i < length; i++) {",
									"        result += characters.charAt(Math.floor(Math.random() * characters.length));",
									"    }",
									"    return result;",
									"}",
									"pm.environment.set(\"test_order_negative_items\", generateHexId(16));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"orderId\": \"{{test_order_negative_items}}\",\n    \"numItems\": -5\n}"
						},
						"url": {
							"raw": "{{base_url_producer}}/create-order",
							"host": ["{{base_url_producer}}"],
							"path": ["create-order"]
						},
						"description": "Boundary condition: Negative numItems. Should be rejected if validation exists."
					},
					"response": []
				},
				{
					"name": "Test 5.3 - Very Long orderId (Boundary)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// Generate a very long hex orderId (1000 characters)",
									"function generateHexId(length) {",
									"    let result = '';",
									"    const characters = '0123456789ABCDEF';",
									"    for (let i = 0; i < length; i++) {",
									"        result += characters.charAt(Math.floor(Math.random() * characters.length));",
									"    }",
									"    return result;",
									"}",
									"pm.environment.set(\"test_order_long_id\", generateHexId(1000));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// System should handle long orderIds gracefully",
									"pm.test(\"Long orderId processed\", () => {",
									"    // Accept either 201 (accepted) or 400 (length validation)",
									"    pm.expect(pm.response.code).to.be.oneOf([201, 400]);",
									"    if (pm.response.code === 201) {",
									"        console.log(\"Very long orderId accepted\");",
									"    } else {",
									"        console.log(\"Very long orderId rejected by validation\");",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"orderId\": \"{{test_order_long_id}}\",\n    \"numItems\": 3\n}"
						},
						"url": {
							"raw": "{{base_url_producer}}/create-order",
							"host": ["{{base_url_producer}}"],
							"path": ["create-order"]
						},
						"description": "Boundary condition: Very long orderId (1000 chars). Tests string length handling."
					},
					"response": []
				}
			],
			"description": "Boundary condition tests for edge cases in validation."
		}
	]
}
